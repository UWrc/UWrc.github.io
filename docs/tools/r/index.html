<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="HYAK Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="HYAK Blog Atom Feed"><title data-react-helmet="true">R and Rstudio | HYAK</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="R and Rstudio | HYAK"><meta data-react-helmet="true" name="description" content="R is a popular statistical programming language for data science and analytics. We rely on Singularity containers to deploy R and you can get a refresher on modules and containers."><meta data-react-helmet="true" property="og:description" content="R is a popular statistical programming language for data science and analytics. We rely on Singularity containers to deploy R and you can get a refresher on modules and containers."><meta data-react-helmet="true" property="og:url" content="https://hyak.uw.edu/docs/tools/r"><link data-react-helmet="true" rel="shortcut icon" href="/img/logos/uw_icon.png"><link data-react-helmet="true" rel="canonical" href="https://hyak.uw.edu/docs/tools/r"><link rel="stylesheet" href="/styles.3966499e.css">
<link rel="preload" href="/styles.d5386c7c.js" as="script">
<link rel="preload" href="/runtime~main.01fd4fd1.js" as="script">
<link rel="preload" href="/main.b316ed8a.js" as="script">
<link rel="preload" href="/1.e83048d8.js" as="script">
<link rel="preload" href="/2.5b945aff.js" as="script">
<link rel="preload" href="/99.db2338b8.js" as="script">
<link rel="preload" href="/935f2afb.90f36620.js" as="script">
<link rel="preload" href="/17896441.bc26fe85.js" as="script">
<link rel="preload" href="/e875005d.22f8024f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logos/uw_icon.png" alt="HYAK Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logos/uw_icon.png" alt="HYAK Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Research Computing</strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><a class="navbar__item navbar__link" href="/systems">Systems</a><a class="navbar__item navbar__link" href="/pricing">Pricing</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Documentation</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/about">About</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/about">Supporting You</a></li><li><a class="dropdown__link" href="/team">Our Team</a></li><li><a class="dropdown__link" href="/board">Governance Board</a></li><li><a class="dropdown__link" href="/publications">Publications</a></li></ul></div><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_16CL"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logos/uw_icon.png" alt="HYAK Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logos/uw_icon.png" alt="HYAK Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Research Computing</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/">Home</a></li><li class="menu__list-item"><a class="menu__link" href="/systems">Systems</a></li><li class="menu__list-item"><a class="menu__link" href="/pricing">Pricing</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" role="button" href="/about">About</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/about">Supporting You</a></li><li class="menu__list-item"><a class="menu__link" href="/team">Our Team</a></li><li class="menu__list-item"><a class="menu__link" href="/board">Governance Board</a></li><li class="menu__list-item"><a class="menu__link" href="/publications">Publications</a></li></ul></li></ul></div></div></div></nav><div class="scroll-notifier" style="visibility:hidden;width:100%"></div><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Get Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Start Here</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/join-group">Join a Group</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/account-creation">Account Creation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/account-activation">Account Activation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Storage</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/storage/data">Start Here</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/storage/gscratch">Storage on HYAK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/storage/transfer">Data Transfer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/storage/archive">Archive on LOLO</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Compute</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/compute/scheduling-jobs">Scheduling Jobs</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Tools &amp; Software</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/software">Start Here</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/modules">Modules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/compilers">Compilers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/containers">Singularity and Docker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/python">Python</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/tools/r">R and Rstudio</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/jupyter">Jupyter Notebooks</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contribution Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contribute/markdown-guide">Markdown Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contribute/link-markdown">Linking Markdown to Docusaurus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contribute/mdx">Powered by MDX</a></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_2WRA"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_CoMu"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">R and Rstudio</h1></header><div class="markdown"><p>R is a popular statistical programming language for data science and analytics. We rely on Singularity containers to deploy R and you can get a refresher on <a href="/docs/tools/modules">modules</a> and <a href="/docs/tools/containers">containers</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="r"></a>R<a class="hash-link" href="#r" title="Direct link to heading">#</a></h2><p>We encourage users to employ the containerized versions of R instead of compiling from source and running bare-metal. We&#x27;ll use Docker hub containers as that is where the most regular updates to R come from.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="user-environment"></a>User Environment<a class="hash-link" href="#user-environment" title="Direct link to heading">#</a></h3><p>If you use a non-custom R container you&#x27;ll likely want to run <code>install.packages()</code> at some point. Usually on a non-shared platform like your local setup (where you have full administrative privileges) R will install things into central paths. You don&#x27;t want to do that on HYAK so you need to specify user paths.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-shell-session codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div style="display:flex"><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ff5f56;margin-left:0"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ffbd2e;margin-left:8px"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#27c93f;margin-left:8px"></div></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cat ~/.Renviron </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">R_LIBS=&quot;/gscratch/scrubbed/npho/R/&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>If you plan on using multiple R versions you will want to set <code>R_LIBS</code> appropriately with each different container (i.e., R version) used so packages compiled against one version of R don&#x27;t conflict with another. Using sub-folders with names matching that version of R is sufficient.</p></div></div><p>You can set custom R environment variables with the <code>.Renviron</code> file. I set the <code>R_LIBS</code> environment variable to point to a folder I created in &quot;scrubbed&quot; as an example but you will want to use a shared lab space or other path unique to your environment.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>If you set <code>R_LIBS</code> to your home directory you can quickly run out of inodes as R likes to create a lot of files. Use your lab directory instead.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="base-container"></a>Base Container<a class="hash-link" href="#base-container" title="Direct link to heading">#</a></h3><p>Let&#x27;s say we wanted to use R-4.0.3 from Docker hub
[<a href="https://hub.docker.com/_/r-base?tab=tags&amp;page=1&amp;ordering=last_updated" target="_blank" rel="noopener noreferrer">www</a>].</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">singularity pull docker://r-base:4.0.3</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>Be sure to do this from a build node, you need to be routed to the internet to resolve Dockerhub so you can download and have compute resources to do the image conversion from a Docker to Singularity container.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-shell-session codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div style="display:flex"><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ff5f56;margin-left:0"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ffbd2e;margin-left:8px"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#27c93f;margin-left:8px"></div></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ module load singularity</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ singularity pull docker://r-base:4.0.3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">INFO:    Converting OCI blobs to SIF format</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">INFO:    Starting build...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Getting image source signatures</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Skipping fetch of repeat blob sha256:ecd924c7226f314c16de965258f37da4aa990c07e494be1116af512706138401</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Skipping fetch of repeat blob sha256:4fec22ce03e6be2d27efb3e9a90be68b14183859abf0864518e2581aa49fb8f5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Skipping fetch of repeat blob sha256:69d900227a8f4d4d2647927b9fa8da77f0f535ca497bc771c5f8a72b0cc971df</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Skipping fetch of repeat blob sha256:45c9ad96a035ae2a5bda28a6e666ed7e1bbe5d945180faafd1c2ed611473e728</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Skipping fetch of repeat blob sha256:f6f2416c67056dd5c3a5948858ab4578631e13cc36ee43bd8d44dea4ec4693f7</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Skipping fetch of repeat blob sha256:0079bdf52f600362737f2c00e7e7ae11458844ef1d06265caf24115be990c4ab</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Copying config sha256:729e7d1e2a8b59f2e885f4c7586be463050a70c00cc06bdef306e93a5bf88922</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 4.11 KiB / 4.11 KiB [======================================================] 0s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Writing manifest to image destination</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Storing signatures</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021/01/10 11:41:34  info unpack layer: sha256:ecd924c7226f314c16de965258f37da4aa990c07e494be1116af512706138401</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021/01/10 11:41:37  info unpack layer: sha256:4fec22ce03e6be2d27efb3e9a90be68b14183859abf0864518e2581aa49fb8f5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021/01/10 11:41:37  info unpack layer: sha256:69d900227a8f4d4d2647927b9fa8da77f0f535ca497bc771c5f8a72b0cc971df</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021/01/10 11:41:38  info unpack layer: sha256:45c9ad96a035ae2a5bda28a6e666ed7e1bbe5d945180faafd1c2ed611473e728</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021/01/10 11:41:38  info unpack layer: sha256:f6f2416c67056dd5c3a5948858ab4578631e13cc36ee43bd8d44dea4ec4693f7</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021/01/10 11:41:38  info unpack layer: sha256:0079bdf52f600362737f2c00e7e7ae11458844ef1d06265caf24115be990c4ab</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">INFO:    Creating SIF file...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">INFO:    Build complete: r-base_4.0.3.sif</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>The command will take a minute and create the SIF file in your current directory.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-shell-session codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div style="display:flex"><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ff5f56;margin-left:0"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ffbd2e;margin-left:8px"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#27c93f;margin-left:8px"></div></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ls -alh r-base_4.0.3.sif </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">474M r-base_4.0.3.sif</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>You can run the R binary within the container like below.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-shell-session codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div style="display:flex"><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ff5f56;margin-left:0"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ffbd2e;margin-left:8px"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#27c93f;margin-left:8px"></div></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ singularity run r-base_4.0.3.sif R</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">R version 4.0.3 (2020-10-10) -- &quot;Bunny-Wunnies Freak Out&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Copyright (C) 2020 The R Foundation for Statistical Computing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Platform: x86_64-pc-linux-gnu (64-bit)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; library(tidyverse)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Error in library(tidyverse) : there is no package called ‘tidyverse’</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>You can run <code>install.packages()</code> as you normally would if you were working with R locally and it will install all the files to whatever path you set <code>R_LIBS</code> to in the <a href="#user-environment">user environment</a> instructions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="tidyverse-container"></a>Tidyverse Container<a class="hash-link" href="#tidyverse-container" title="Direct link to heading">#</a></h3><p>The most popular library for R is the Tidyverse [<a href="https://www.tidyverse.org" target="_blank" rel="noopener noreferrer">www</a>], which includes packages like <code>ggplot2</code>, <code>dplyr</code>, and others. As you can see in the <a href="#base-container">previous section</a>, it doesn&#x27;t exist if we use the <code>r-base</code> Docker hub container.</p><p>Your options are to: </p><ol><li>run <code>install.packages(&quot;tidyverse&quot;)</code> or</li><li>use a Docker container with it pre-installed.</li></ol><p>Option 1, while ok, uses a lot (and I mean a lot) of inodes as well as taking a long time to compile. It&#x27;s much leaner on the cluster and faster to use a pre-built container if you know you&#x27;ll use the Tidyverse.</p><p>The Rocker Project [<a href="https://www.rocker-project.org" target="_blank" rel="noopener noreferrer">www</a>] manages popular Docker containers for R, including a pre-built one with Tidyverse so you can grab the latest tagged container from Docker hub [<a href="https://hub.docker.com/r/rocker/tidyverse/tags?page=1&amp;ordering=last_updated" target="_blank" rel="noopener noreferrer">www</a>].</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">singularity pull docker://rocker/tidyverse:4.0.1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>Prior instructions on R <a href="#user-environment">user environment</a> apply but once downloaded (the Docker to Singularity conversion will take a few minutes), it will create a separate SIF file as shown below.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-shell-session codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div style="display:flex"><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ff5f56;margin-left:0"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ffbd2e;margin-left:8px"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#27c93f;margin-left:8px"></div></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ singularity pull docker://rocker/tidyverse:4.0.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">INFO:    Converting OCI blobs to SIF format</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">INFO:    Starting build...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Getting image source signatures</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Skipping fetch of repeat blob sha256:a4a2a29f9ba48efd3d2075f395538b2eec56fb1bedfb7aecf5e54174446f9e2a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Skipping fetch of repeat blob sha256:127c9761dcbaa288abc58fc56437c2f2ffbe611b9f7f30e0b5b43cd348bb2094</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Skipping fetch of repeat blob sha256:d13bf203e905463e64d89b14509aafa983fb8baf7c1931fe0a65652aeb6c838f</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Skipping fetch of repeat blob sha256:4039240d2e0b4bcb42ccbce75bc54570e471ad81457478de35fbeef63536e9c0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Copying blob sha256:0ccb9f239bc673ecea30ef11ce2c495bbb85abdd96d675d44f60324c7c45d387</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 20.56 KiB / 20.56 KiB [====================================================] 0s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Copying blob sha256:c01d69634a9de92ab364afa9d6da377ba923131a4e170c3983a9243acafb0879</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 278.52 MiB / 278.52 MiB [=================================================] 11s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Copying blob sha256:d6e983dd45f0e15594336e5aabbcd004fbbb7efd8355ebd5e07f916837659fd6</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 225.42 MiB / 225.42 MiB [==================================================] 9s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Copying blob sha256:0d19f4c62fe952f2cec37dbde49decc2a787df40d87eecd7a8a657c04335c20b</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 190.84 KiB / 190.84 KiB [==================================================] 0s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Copying blob sha256:c4186f33a14ce3205196906179b6d17db22a3e9dfc9f34fedbb1f38bf2e715c9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 190.39 MiB / 190.39 MiB [==================================================] 7s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Copying config sha256:22b3bdc99b5be46467e695d3639022d344d0fc4daf239a6da1f6b478ed1ee695</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 6.38 KiB / 6.38 KiB [======================================================] 0s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Writing manifest to image destination</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Storing signatures</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021/01/10 12:28:57  info unpack layer: sha256:a4a2a29f9ba48efd3d2075f395538b2eec56fb1bedfb7aecf5e54174446f9e2a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021/01/10 12:28:59  info unpack layer: sha256:127c9761dcbaa288abc58fc56437c2f2ffbe611b9f7f30e0b5b43cd348bb2094</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021/01/10 12:28:59  info unpack layer: sha256:d13bf203e905463e64d89b14509aafa983fb8baf7c1931fe0a65652aeb6c838f</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021/01/10 12:28:59  info unpack layer: sha256:4039240d2e0b4bcb42ccbce75bc54570e471ad81457478de35fbeef63536e9c0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021/01/10 12:28:59  info unpack layer: sha256:0ccb9f239bc673ecea30ef11ce2c495bbb85abdd96d675d44f60324c7c45d387</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021/01/10 12:28:59  info unpack layer: sha256:c01d69634a9de92ab364afa9d6da377ba923131a4e170c3983a9243acafb0879</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021/01/10 12:29:10  info unpack layer: sha256:d6e983dd45f0e15594336e5aabbcd004fbbb7efd8355ebd5e07f916837659fd6</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021/01/10 12:29:22  info unpack layer: sha256:0d19f4c62fe952f2cec37dbde49decc2a787df40d87eecd7a8a657c04335c20b</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021/01/10 12:29:22  info unpack layer: sha256:c4186f33a14ce3205196906179b6d17db22a3e9dfc9f34fedbb1f38bf2e715c9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">INFO:    Creating SIF file...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">INFO:    Build complete: tidyverse_4.0.1.sif</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ls -alh tidyverse_4.0.1.sif</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">675M tidyverse_4.0.1.sif</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>Now when you run this container&#x27;s R binary you can successfully load the Tidyverse.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-shell-session codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div style="display:flex"><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ff5f56;margin-left:0"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ffbd2e;margin-left:8px"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#27c93f;margin-left:8px"></div></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ singularity run tidyverse_4.0.1.sif R</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">R version 4.0.1 (2020-06-06) -- &quot;See Things Now&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Copyright (C) 2020 The R Foundation for Statistical Computing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Platform: x86_64-pc-linux-gnu (64-bit)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; library(tidyverse)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✔ ggplot2 3.3.2     ✔ purrr   0.3.4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✔ tibble  3.0.1     ✔ dplyr   1.0.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✔ tidyr   1.1.0     ✔ stringr 1.4.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✔ readr   1.3.1     ✔ forcats 0.5.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✖ dplyr::filter() masks stats::filter()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✖ dplyr::lag()    masks stats::lag()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Warning messages:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1: replacing previous import ‘vctrs::data_frame’ by ‘tibble::data_frame’ when loading ‘dplyr’ </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2: package ‘purrr’ was built under R version 4.0.3 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>Success!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="module"></a>Module<a class="hash-link" href="#module" title="Direct link to heading">#</a></h3><p>We&#x27;ve since migrated from bare-metal R binaries compiled from source and provided as a module to leveraging containers. However, there are still some version 3 variants of R still available.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-shell-session codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div style="display:flex"><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ff5f56;margin-left:0"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ffbd2e;margin-left:8px"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#27c93f;margin-left:8px"></div></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ module avail r_3 contrib/r/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">----- /sw/modules-1.775/modulefiles -----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">r_3.3.3  r_3.5.1  r_3.6.0  r_3.6.0+Rmpi-impi_2019  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">----- /sw/modules-1.775/modulefiles -----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">contrib/r/3.4.3  contrib/r/3.5.1  contrib/r/3.6.1 </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>As a reminder all &quot;contrib&quot; prefixed modules are user community created and maintained (i.e., not supported by the HYAK team).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="rstudio"></a>Rstudio<a class="hash-link" href="#rstudio" title="Direct link to heading">#</a></h2><p>Rstudio is an integrated development environment (IDE) for R. It&#x27;s a front-end interface, historically a desktop application but it will be delivered through your browser in this instance.</p><p>Rstudio will run in a Singularity container on a compute node then be directed through the login node back to your local computer via port forwarding.</p><p>TODO</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tools/python"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Python</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/tools/jupyter"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Jupyter Notebooks »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#r" class="table-of-contents__link">R</a><ul><li><a href="#user-environment" class="table-of-contents__link">User Environment</a></li><li><a href="#base-container" class="table-of-contents__link">Base Container</a></li><li><a href="#tidyverse-container" class="table-of-contents__link">Tidyverse Container</a></li><li><a href="#module" class="table-of-contents__link">Module</a></li></ul></li><li><a href="#rstudio" class="table-of-contents__link">Rstudio</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">HYAK</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/sign-up">Sign Up</a></li><li class="footer__item"><a class="footer__link-item" href="/docs">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/about">About</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Sponsors</h4><ul class="footer__items"><li class="footer__item"><a href="https://artsci.washington.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">College of Arts &amp; Sciences</a></li><li class="footer__item"><a href="https://www.engr.washington.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">College of Engineering</a></li><li class="footer__item"><a href="https://environment.uw.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">College of the Environment</a></li><li class="footer__item"><a href="https://www.ipd.uw.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Institute for Protein Design</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Contact</h4><ul class="footer__items"><li class="footer__item"><a href="mailto:help@uw.edu?subject=hyak help footer" target="_blank" rel="noopener noreferrer" class="footer__link-item">E-mail</a></li><li class="footer__item"><a href="https://mailman1.u.washington.edu/mailman/listinfo/hyak-users" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li><li class="footer__item"><a href="https://uw-hpcc.slack.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://github.com/uwrc" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Made with ❤️ in Seattle</div></div></div></footer></div>
<script src="/styles.d5386c7c.js"></script>
<script src="/runtime~main.01fd4fd1.js"></script>
<script src="/main.b316ed8a.js"></script>
<script src="/1.e83048d8.js"></script>
<script src="/2.5b945aff.js"></script>
<script src="/99.db2338b8.js"></script>
<script src="/935f2afb.90f36620.js"></script>
<script src="/17896441.bc26fe85.js"></script>
<script src="/e875005d.22f8024f.js"></script>
</body>
</html>
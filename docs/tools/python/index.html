<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="HYAK Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="HYAK Blog Atom Feed"><title data-react-helmet="true">Python | HYAK</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Python | HYAK"><meta data-react-helmet="true" name="description" content="[pytorch-cuda11]: /img/docs/pytorch-cuda11.png &#x27;Pytorch install instructions for pip with CUDA11&#x27;"><meta data-react-helmet="true" property="og:description" content="[pytorch-cuda11]: /img/docs/pytorch-cuda11.png &#x27;Pytorch install instructions for pip with CUDA11&#x27;"><meta data-react-helmet="true" property="og:url" content="https://hyak.uw.edu/docs/tools/python"><link data-react-helmet="true" rel="shortcut icon" href="/img/logos/uw_icon.png"><link data-react-helmet="true" rel="canonical" href="https://hyak.uw.edu/docs/tools/python"><link rel="stylesheet" href="/styles.126168db.css">
<link rel="preload" href="/styles.18819265.js" as="script">
<link rel="preload" href="/runtime~main.6c926de9.js" as="script">
<link rel="preload" href="/main.c9fac66d.js" as="script">
<link rel="preload" href="/1.d2ece691.js" as="script">
<link rel="preload" href="/2.f713acc0.js" as="script">
<link rel="preload" href="/107.6b43b9e1.js" as="script">
<link rel="preload" href="/935f2afb.e00cd095.js" as="script">
<link rel="preload" href="/17896441.72d0e66e.js" as="script">
<link rel="preload" href="/d1fde598.a1224169.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logos/uw_icon.png" alt="HYAK Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logos/uw_icon.png" alt="HYAK Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Research Computing</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/systems">Systems</a><a class="navbar__item navbar__link" href="/pricing">Pricing</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Documentation</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/about">About</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/team">Our Team</a></li><li><a class="dropdown__link" href="/board">Governance Board</a></li><li><a class="dropdown__link" href="/publications">Publications</a></li></ul></div><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_16CL"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logos/uw_icon.png" alt="HYAK Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logos/uw_icon.png" alt="HYAK Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Research Computing</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/systems">Systems</a></li><li class="menu__list-item"><a class="menu__link" href="/pricing">Pricing</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" role="button" href="/about">About</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/team">Our Team</a></li><li class="menu__list-item"><a class="menu__link" href="/board">Governance Board</a></li><li class="menu__list-item"><a class="menu__link" href="/publications">Publications</a></li></ul></li></ul></div></div></div></nav><div class="scroll-notifier" style="visibility:hidden;width:100%"></div><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Get Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Start Here</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/join-group">Join a Group</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/account-creation">Account Creation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/account-activation">Account Activation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Setup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/setup/index">Start Here</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/setup/ssh">SSH</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/setup/vscode">Visual Studio Code</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Storage</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/storage/data">Start Here</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/storage/gscratch">Storage on HYAK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/storage/transfer">Data Transfer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/storage/archive">Archive on LOLO</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Compute</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/compute/slurm">Start Here</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/compute/scheduling-jobs">Scheduling Jobs</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Tools &amp; Software</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/software">Start Here</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/modules">Modules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/compilers">Compilers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/containers">Singularity and Docker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/r">R and Rstudio</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/tools/python">Python</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/jupyter">Jupyter Notebooks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/matlab">Matlab</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contribution Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contribute/markdown-guide">Markdown Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contribute/link-markdown">Linking Markdown to Docusaurus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contribute/mdx">Powered by MDX</a></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_2WRA"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_CoMu"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Python</h1></header><div class="markdown"><p>Python is a scripting and general purpose programming language with a rich ecosystem of computational libraries. On HYAK it&#x27;s mostly associated with Pytorch, Tensorflow, and other machine learning libraries but there are wider uses. </p><p>Since HYAK is a shared platform and you do not have root or administrative access, you will need to control your environment and install packages in a deliberate way. We offer either virtual environments through <a href="#miniconda3">miniconda3</a> or using <a href="#containers">containers</a> (e.g., Singularity, Docker).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="miniconda3"></a>Miniconda3<a class="hash-link" href="#miniconda3" title="Direct link to heading">#</a></h2><p>Miniconda3 is a leaner deployment of Python3 versus the more widely known Anaconda3 variant. While both are functionally equivalent, we encourage Miniconda3 vs Anaconda3 due to the reduced number of inodes (i.e., files) it creates.</p><p>We provide a summarized version below to get started but more elaborate instructions directly from anaconda [<a href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/linux.html" target="_blank" rel="noopener noreferrer">www</a>].</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="install"></a>Install<a class="hash-link" href="#install" title="Direct link to heading">#</a></h3><p>Download the latest miniconda3 version.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>Install miniconda3 to your home directory. If you use large or multiple virtual environments you&#x27;ll be better off specifying a lab directory or elsewhere due to the (inode and capacity) limits of home directories.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">bash</span><span class="token plain"> Miniconda3-latest-Linux-x86_64.sh -b -p </span><span class="token environment constant" style="color:rgb(130, 170, 255)">$HOME</span><span class="token plain">/miniconda3</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="configure"></a>Configure<a class="hash-link" href="#configure" title="Direct link to heading">#</a></h3><p>You&#x27;ll need to initialize your shell. For most people (i.e., unless you actively changed it) should be using the cluster default of <code>bash</code>. If use <code>zsh</code>, <code>fish</code>, or any other terminal then you&#x27;ll need to swap out your terminal as appropriate.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">conda init </span><span class="token function" style="color:rgb(130, 170, 255)">bash</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p><strong>Optional</strong>: your terminal prompt will show <code>(base)</code> to indicate miniconda3 is active but it takes up a lot of screen real estate so I like to hide it until I&#x27;m actively using Python. The next command keeps miniconda3 deactivated until you call it.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">conda config --set auto_activate_base </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>If you skip running the above command then miniconda3 will always be active.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If you do use the command above then you will need to run <code>conda activate</code> before each use and you can unload it with <code>conda deactivate</code>.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="environments"></a>Environments<a class="hash-link" href="#environments" title="Direct link to heading">#</a></h3><p>We&#x27;ll assume you&#x27;re using miniconda3 environments here for this walk through. It&#x27;s generalizable to any Python environment but we will use an install of Pytorch against CUDA11 as the example since it is one of the most popular Python libraries used on HYAK.</p><p>First create an environment, I put it in my scrubbed directory but you can put it anywhere (preferably your lab directory if you have one). We discourage using your home directory as you will likely hit your inode (i.e., file) limits. Please alter the path in the example below to suit your unique needs. Note <code>pytorch-cuda11</code> in the example below will be the environment name.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">conda create -p /gscratch/scrubbed/npho/pytorch-cuda11 </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">python</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">3.8</span><span class="token plain"> -y</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>You can see all the conda environments you have regardless of where they are stored.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-shell-session codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div style="display:flex"><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ff5f56;margin-left:0"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ffbd2e;margin-left:8px"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#27c93f;margin-left:8px"></div></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ conda env list</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># conda environments:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                         /gscratch/scrubbed/npho/pytorch-cuda11</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">base                  *  /usr/lusers/npho/miniconda3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>To load the environment at this point one would run:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">conda activate /gscratch/scrubbed/npho/pytorch-cuda11</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>Note you have to provide the full path. If you use the <code>--name</code> or <code>-n</code> option instead of the <code>--prefix</code> or <code>-p</code> option then by default your environments will be in the same place as your miniconda3 installation, likely your home directory if you used our instructions in the <a href="#install">previous section</a>. If you run only 1 environment and use only a few packages this should be fine, otherwise you&#x27;ll want to use the scrubbed or your lab directories.</p><p>If you are going to use a non-miniconda3 path regularly then you may want to run a variant of the command below to indicate an additional path that conda should search for your environments.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">conda config --append envs_dirs /gscratch/scrubbed/npho</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>You need to swap out my scrubbed directory with your lab folder. Now if you list all your conda environments again you should see a change.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-shell-session codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div style="display:flex"><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ff5f56;margin-left:0"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ffbd2e;margin-left:8px"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#27c93f;margin-left:8px"></div></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ conda env list</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># conda environments:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pytorch-cuda11           /gscratch/scrubbed/npho/pytorch-cuda11</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">base                  *  /usr/lusers/npho/miniconda3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>Adding a new conda environment prefix path will allow your environments to be referred to by their names alone instead of the full path, although you could still use the full path to avoid any ambiguity.</p><p>Now (for me) loading my conda environment is a more concise command of:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">conda activate pytorch-cuda11</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>However, while loading environments will be a shorter command, you will still see the full path in your terminal prompt and this may annoy some folks (it annoys me) so one work around below <em>in lieu</em> of what you just did.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>If you use the alternative method of making your environment references more concise below, then removing environments will be a 2 step process just as making each more concise will be a 2 step process.</p></div></div><p>Instead of adding a path to the <code>envs_dirs</code> variable as demonstrated <a href="#environments">above</a> you can create a symbolic link for each conda environment after you create it. Modify your link command below as appropriate.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">ln</span><span class="token plain"> -s /gscratch/scrubbed/npho/pytorch-cuda10 ~/miniconda3/envs/</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>In this two step process you will have to create the environment using the <code>--prefix</code> or <code>-p</code> arguments as well as symbolically link it to the <code>env</code> sub-folder where your miniconda3 is installed.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-shell-session codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div style="display:flex"><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ff5f56;margin-left:0"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ffbd2e;margin-left:8px"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#27c93f;margin-left:8px"></div></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ conda env list </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># conda environments:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                         /gscratch/scrubbed/npho/pytorch-cuda11</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">base                  *  /usr/lusers/npho/miniconda3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pytorch-cuda11           /usr/lusers/npho/miniconda3/envs/pytorch-cuda11</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>The first and third environments above are the same and to remove both will be a two step process, first undoing the symbolic link or <code>conda env remove -n pytorch-cuda11</code> followed by removing the actual environment by its path reference with <code>conda env remove -p /gscratch/scrubbed/npho/pytorch-cuda11</code>.</p><p>However, I don&#x27;t create / remove environments often so this extra step is nice in that I can (un)load my environments concisely and when it is loaded the screen of my terminal prompt isn&#x27;t consumed. Your level of desire for command line vanity may vary :)</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="pip-install-pytorch"></a>pip install pytorch<a class="hash-link" href="#pip-install-pytorch" title="Direct link to heading">#</a></h3><p>If you&#x27;ve followed the full page up til this point you have a blank conda environment using python3.8 and have loaded it using a variant of the following command:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">conda activate pytorch-cuda11</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>Pytorch has a great install guide [<a href="https://pytorch.org/get-started/locally/" target="_blank" rel="noopener noreferrer">www</a>] and you can see below it provides what the commands are for whichever platform you are using and which install method you prefer. We&#x27;re going with <code>pip</code> as it&#x27;s the most widely known and it demonstrates how easy it is to use in a conda environment.</p><p>HYAK runs Linux and as of January 2021 CUDA11 is the version on all the GPUs.</p><p><img src="/img/docs/pytorch-cuda11.png" alt="pytorch-cuda11" title="Pytorch install instructions for pip with CUDA11"></p><p>To use the install instructions you see above in an easy copy-and-paste format see below <strong>from within an activated conda environment</strong>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-bash codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pip </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">torch</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token number" style="color:rgb(247, 140, 108)">1.7</span><span class="token plain">.1+cu110 </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">torchvision</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token number" style="color:rgb(247, 140, 108)">0.8</span><span class="token plain">.2+cu110 </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">torchaudio</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0.7</span><span class="token plain">.2 -f https://download.pytorch.org/whl/torch_stable.html</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>As a reminder these packages are pulled from the internet so you will need a build node or similar to do this part of the install.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>The above <code>pip install</code> commands are equally valid for any other Python libraries.</p></div></div><p>Pytorch doesn&#x27;t need a GPU to run although for most machine learning projects it&#x27;s indispensible. If you have an interactive session with a GPU (run <code>nvidia-smi</code> to confirm) you can verify it&#x27;s all working with the following test from Pytorch [<a href="https://pytorch.org/get-started/locally/#linux-verification" target="_blank" rel="noopener noreferrer">www</a>]:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_3RXF"><div tabindex="0" class="prism-code language-shell-session codeBlock_1wn8 thin-scrollbar"><div class="codeBlockLines_3HrO" style="color:#bfc7d5;background-color:#292d3e"><div style="display:flex"><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ff5f56;margin-left:0"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#ffbd2e;margin-left:8px"></div><div style="width:12px;height:12px;margin-bottom:16px;border-radius:50%;background-color:#27c93f;margin-left:8px"></div></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pytorch-cuda11) $ python3                                                                               Python 3.8.5 (default, Sep  4 2020, 07:30:14)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[GCC 7.3.0] :: Anaconda, Inc. on linux</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt;&gt;&gt; import torch</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt;&gt;&gt; torch.__version__</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&#x27;1.7.1+cu110&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt;&gt;&gt; torch.cuda.is_available()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt;&gt;&gt; </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>Now you have a computationally reproducible environment using Pytorch for machine learning. If you want to save this environment and share with others you can export the packages you&#x27;ve installed in it using the <code>conda env export</code> command and provide either the path or name prefixes. The resulting YAML file can be shared and used to create environments elsewhere that conda is installed.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="python-library-repositories"></a>Python Library Repositories<a class="hash-link" href="#python-library-repositories" title="Direct link to heading">#</a></h3><p>There are multiple places to search for Python libraries. Whatever libraries you install are specific to whatever conda environment is loaded at the time of install.</p><ol><li>Anaconda Cloud [<a href="https://anaconda.org" target="_blank" rel="noopener noreferrer">www</a>]</li><li>Python Package Index (PyPI) [<a href="https://pypi.org" target="_blank" rel="noopener noreferrer">www</a>]</li><li>Conda Forge [<a href="https://conda-forge.org" target="_blank" rel="noopener noreferrer">www</a>]</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="containers"></a>Containers<a class="hash-link" href="#containers" title="Direct link to heading">#</a></h2><p>TODO</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tools/r"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« R and Rstudio</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/tools/jupyter"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Jupyter Notebooks »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#miniconda3" class="table-of-contents__link">Miniconda3</a><ul><li><a href="#install" class="table-of-contents__link">Install</a></li><li><a href="#configure" class="table-of-contents__link">Configure</a></li><li><a href="#environments" class="table-of-contents__link">Environments</a></li><li><a href="#pip-install-pytorch" class="table-of-contents__link">pip install pytorch</a></li><li><a href="#python-library-repositories" class="table-of-contents__link">Python Library Repositories</a></li></ul></li><li><a href="#containers" class="table-of-contents__link">Containers</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">HYAK</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/sign-up">Sign Up</a></li><li class="footer__item"><a class="footer__link-item" href="/docs">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/about">About</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Sponsors</h4><ul class="footer__items"><li class="footer__item"><a href="https://artsci.washington.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">College of Arts &amp; Sciences</a></li><li class="footer__item"><a href="https://www.engr.washington.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">College of Engineering</a></li><li class="footer__item"><a href="https://environment.uw.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">College of the Environment</a></li><li class="footer__item"><a href="https://www.ipd.uw.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Institute for Protein Design</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Contact</h4><ul class="footer__items"><li class="footer__item"><a href="mailto:help@uw.edu?subject=hyak help footer" target="_blank" rel="noopener noreferrer" class="footer__link-item">E-mail</a></li><li class="footer__item"><a href="https://mailman1.u.washington.edu/mailman/listinfo/hyak-users" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li><li class="footer__item"><a href="https://uw-hpcc.slack.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://github.com/uwrc" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Made with ❤️ in Seattle</div></div></div></footer></div>
<script src="/styles.18819265.js"></script>
<script src="/runtime~main.6c926de9.js"></script>
<script src="/main.c9fac66d.js"></script>
<script src="/1.d2ece691.js"></script>
<script src="/2.f713acc0.js"></script>
<script src="/107.6b43b9e1.js"></script>
<script src="/935f2afb.e00cd095.js"></script>
<script src="/17896441.72d0e66e.js"></script>
<script src="/d1fde598.a1224169.js"></script>
</body>
</html>